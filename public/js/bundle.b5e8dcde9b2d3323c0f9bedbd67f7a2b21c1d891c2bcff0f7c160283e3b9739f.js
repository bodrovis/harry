(function(){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(b){var a=this;do{if(Element.prototype.matches.call(a,b))return a;a=a.parentElement||a.parentNode}while(a!==null&&a.nodeType===1)return null});function a(){document.location.hash='#'+this.getAttribute('id')}function b(a){document.readyState!='loading'?a():document.addEventListener('DOMContentLoaded',a)}b(function(){var d=document.querySelector('.main-menu .dropdown .is-active'),e,c,f,b;if(!d||d.closest('.has-children').classList.add('is-active'),e=document.querySelector('.js-index-placeholder'),!!e){c='<ul class="index">',Array.prototype.forEach.call(document.querySelectorAll('.chapter-title'),function(a,b){c+='<li><a href="#'+a.getAttribute('id')+'">'+a.textContent+'</a></li>'}),c+='</ul>',e.innerHTML=c,f=document.querySelector('.js-show-index'),b=document.querySelector('.js-index-placeholder');let a=null;function g(){a=Popper.createPopper(f,b,{strategy:'absolute',placement:'top-start',modifiers:[{name:'offset',options:{offset:[-41,8]}}]})}function h(){a&&(a.destroy(),a=null)}f.addEventListener('click',function(a){a.preventDefault(),this.classList.toggle('opened'),b.hasAttribute('data-show')?(b.removeAttribute('data-show'),h()):(b.setAttribute('data-show',''),g())})}document.addEventListener('click',function(c){for(var b=c.target;b&&b!=this;b=b.parentNode)if(b.matches('.page-num')){a.apply(b.closest('.row'));break}},!1),document.addEventListener('click',function(c){for(var b=c.target;b&&b!=this;b=b.parentNode)if(b.matches('.chapter-title')){a.apply(b);break}},!1),document.addEventListener('click',function(b){for(var a=b.target;a&&a!=this;a=a.parentNode)if(a.matches('.js-show-dialog')){b.preventDefault(),document.querySelector(a.getAttribute('data-target')).style.display='block';break}},!1),document.onkeydown=function(a){a=a||window.event;var b=!1;"key"in a?b=a.key==="Escape"||a.key==="Esc":b=a.keyCode===27,b&&(document.querySelector('.js-dialog').style.display='none')},document.addEventListener('click',function(b){for(var a=b.target;a&&a!=this;a=a.parentNode)if(a.matches('.js-close-dialog')){b.preventDefault(),a.closest('.js-dialog').style.display='none';break}},!1),document.addEventListener('click',function(b){for(var a=b.target,c;a&&a!=this;a=a.parentNode)if(a.matches('.js-menu-toggler')){b.preventDefault(),c=a.closest('.js-menu'),c.querySelector(a.getAttribute('data-target')).classList.toggle('visible');break}},!1),document.addEventListener('click',function(b){for(var a=b.target,d,c;a&&a!=this;a=a.parentNode)if(a.matches('.js-show-toggle')){b.preventDefault(),d=a.getAttribute('data-target'),c=a.parentNode,c.classList.toggle('opened'),c.querySelector(d).classList.toggle('hidden');break}},!1)})})()